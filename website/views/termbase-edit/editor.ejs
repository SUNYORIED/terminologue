<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8"/>
		<title>Screenful Editor</title>
		<script type="text/javascript">var rootPath="/../../";</script>
		<script type="text/javascript" src="../../libs/jquery.js"></script>
		<link type="text/css" rel="stylesheet" href="../../libs/screenful/screenful-theme-green.css" />
    <link type="text/css" rel="stylesheet" href="../../libs/screenful/screenful.css" />
		<link type="text/css" rel="stylesheet" href="../../libs/screenful/screenful-editor.css" />
		<script type="text/javascript" src="../../libs/screenful/screenful.js"></script>
		<script type="text/javascript" src="../../libs/screenful/screenful-editor.js"></script>
		<script type="text/javascript" src="../../libs/screenful/screenful-loc-en.js"></script>
		<script type="text/javascript" src="../../../libs/js.cookie.js"></script>
		<script type="text/javascript">
		Screenful.Editor.createUrl="./create.json";
		Screenful.Editor.readUrl="./read.json";
		Screenful.Editor.updateUrl="./update.json";
		Screenful.Editor.deleteUrl="./delete.json";
		Screenful.Editor.viewer=function(div, entry){
			$(div).html(entry.id);
		};
		Screenful.Editor.editor=function(div, entry, uneditable){
      $(div).html(entry.content);
		};
		Screenful.Editor.harvester=function(div){
      return "bla bla";
		};
		Screenful.Editor.allowSourceCode=true;
		Screenful.Editor.formatSourceCode=function(str){
			return Screenful.formatJson(str);
		};
		Screenful.Editor.validateSourceCode=function(str){
			return Screenful.isWellFormedJson(str);
		};
		Screenful.Editor.cleanupSourceCode=function(str){
			return str;
		};
		</script>
		<link type="text/css" rel="stylesheet" href="../../libs/screenful/screenful-history.css" />
		<script type="text/javascript" src="../../libs/screenful/screenful-history.js"></script>
		<script type="text/javascript">
		Screenful.History.historyUrl="./history.json";
		Screenful.History.isDeletion=function(revision){
			return revision.action=="delete" || revision.action=="purge";
		};
		Screenful.History.getRevisionID=function(revision){
			return revision.revision_id;
		};
		Screenful.History.printAction=function(revision){
			var content="";
			//actions: delete | create | update | purge
			//historiography: {apikey: apikey} | {uploadStart: uploadStart, filename: filename}
			content+="<div style='white-space: nowrap'>";
				if(revision.action=="create") content+="<b>Created</b>";
				else if(revision.action=="update") content+="<b>Changed</b>";
				else if(revision.action=="delete") content+="<b>Deleted</b>";
				else if(revision.action=="purge") content+="<b>Bulk-deleted</b>";
				if(revision.historiography.uploadStart) content+=" while uploading";
			content+="</div>";
			if(revision.email) content+="<div style='white-space: nowrap'><b>By:</b> "+revision.email+"</div>";
			content+="<div style='white-space: nowrap'><b>When:</b> "+revision.when+"</div>";
			return content;
			//return revision.action+", "+revision.email+", "+revision.when+", "+JSON.stringify(revision.historiography, null, "<br/>");
		};
		Screenful.History.fakeEntry=function(revision){
			return {id: revision.entry_id, content: revision.content};
		};
		</script>

	</head>
	<body>
	</body>
</html>
